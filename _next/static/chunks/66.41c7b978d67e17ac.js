(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[66],{66:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>P});var n=t(7876),o=t(4232),i=t(8660),s=t(5302),a=t(5681),l=t(3061),c=t(5577),u=t(2627),p=t(3761),d=t(8557),y=t(6691),h=t(909),m=t.n(h);let x="andreabellipanni".replace(/^\/+/,"").replace(/\/+$/,""),w=x?`/${x}`:"",g=`${w}/lanyard/card.glb`,f=`${w}/lanyard/lanyard.png`;function P({position:e=[0,0,30],gravity:r=[0,-40,0],fov:t=20,transparent:i=!0,onSelect:c}){let[u,d]=(0,o.useState)(()=>window.innerWidth<768);return(0,o.useEffect)(()=>{let e=()=>d(window.innerWidth<768);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,n.jsx)("div",{className:m().wrapper,children:(0,n.jsxs)(s.Hl,{camera:{position:e,fov:t},dpr:[1,u?1.5:2],gl:{alpha:i},onCreated:({gl:e})=>e.setClearColor(new y.Q1f(0),+!i),children:[(0,n.jsx)("ambientLight",{intensity:Math.PI}),(0,n.jsx)(p.AQ,{gravity:r,timeStep:u?1/30:1/60,children:(0,n.jsx)(j,{isMobile:u,onSelect:c})}),(0,n.jsxs)(a.OH,{blur:.75,children:[(0,n.jsx)(l.O,{intensity:2,color:"white",position:[0,-1,5],rotation:[0,0,Math.PI/3],scale:[100,.1,1]}),(0,n.jsx)(l.O,{intensity:3,color:"white",position:[-1,-1,1],rotation:[0,0,Math.PI/3],scale:[100,.1,1]}),(0,n.jsx)(l.O,{intensity:3,color:"white",position:[1,1,1],rotation:[0,0,Math.PI/3],scale:[100,.1,1]}),(0,n.jsx)(l.O,{intensity:10,color:"white",position:[-10,0,14],rotation:[0,Math.PI/2,Math.PI/3],scale:[100,10,1]})]})]})})}function j({maxSpeed:e=18,minSpeed:r=.08,isMobile:t=!1,onSelect:s}){let a=(0,o.useRef)(null),l=(0,o.useRef)(null),d=(0,o.useRef)(null),h=(0,o.useRef)(null),m=(0,o.useRef)(null),x=(0,o.useRef)(null),w=new y.Pq0,P=new y.Pq0,j=new y.Pq0,b=new y.Pq0,M={type:"dynamic",canSleep:!0,colliders:!1,angularDamping:7,linearDamping:7},{nodes:q,materials:v}=(0,c.p)(g),z=(0,u.zo)(f),[S]=(0,o.useState)(()=>new y.B6O([new y.Pq0,new y.Pq0,new y.Pq0,new y.Pq0])),[E,I]=(0,o.useState)(!1),[L,R]=(0,o.useState)(!1),[O,C]=(0,o.useState)(null),U=(0,o.useRef)(null),_=(0,o.useRef)(null);return(0,p.Y7)(l,d,[[0,0,0],[0,0,0],1]),(0,p.Y7)(d,h,[[0,0,0],[0,0,0],1]),(0,p.Y7)(h,m,[[0,0,0],[0,0,0],1]),(0,p.hE)(m,x,[[0,0,0],[0,.1,0]]),(0,o.useEffect)(()=>{if(!L){document.body.style.cursor="auto";return}return document.body.style.cursor=E?"grabbing":"grab",()=>{document.body.style.cursor="auto"}},[L,E]),(0,i.D)((n,o)=>{E&&(w.set(n.pointer.x,n.pointer.y,.5).unproject(n.camera),b.copy(w).sub(n.camera.position).normalize(),w.add(b.multiplyScalar(n.camera.position.length())),[x,d,h,m,l].forEach(e=>e.current?.wakeUp()),x.current?.setNextKinematicTranslation({x:w.x-E.x,y:w.y-E.y,z:w.z-E.z})),l.current&&a.current&&([d,h].forEach(t=>{t.current.lerped||(t.current.lerped=new y.Pq0().copy(t.current.translation()));let n=Math.max(.1,Math.min(1,t.current.lerped.distanceTo(t.current.translation())));t.current.lerped.lerp(t.current.translation(),o*(r+n*(e-r)))}),S.points[0].copy(m.current.translation()),S.points[1].copy(h.current.lerped),S.points[2].copy(d.current.lerped),S.points[3].copy(l.current.translation()),a.current.geometry.setPoints(S.getPoints(t?24:48)),P.copy(x.current.angvel()),j.copy(x.current.rotation()),x.current.setAngvel({x:P.x,y:P.y-.25*j.y,z:P.z}))}),S.curveType="chordal",z.wrapS=z.wrapT=y.GJx,(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("group",{position:[0,4.5,0],children:[(0,n.jsx)(p.Ux,{ref:l,...M,type:"fixed"}),(0,n.jsx)(p.Ux,{position:[.5,0,0],ref:d,...M,children:(0,n.jsx)(p.wV,{args:[.1]})}),(0,n.jsx)(p.Ux,{position:[1,0,0],ref:h,...M,children:(0,n.jsx)(p.wV,{args:[.1]})}),(0,n.jsx)(p.Ux,{position:[1.5,0,0],ref:m,...M,children:(0,n.jsx)(p.wV,{args:[.1]})}),(0,n.jsxs)(p.Ux,{position:[2,0,0],ref:x,...M,type:E?"kinematicPosition":"dynamic",mass:3,children:[(0,n.jsx)(p.Xc,{args:[1,1.35,.02]}),(0,n.jsxs)("group",{scale:2.6,position:[0,-3,-.05],onPointerOver:e=>{R(!0),_.current=new y.Pq0().copy(e.point)},onPointerMove:e=>{if(!x.current||E)return;if(!_.current){_.current=new y.Pq0().copy(e.point);return}let r=new y.Pq0().subVectors(e.point,_.current);_.current.copy(e.point),.003>r.length()||(r.clampLength(0,.012),x.current.applyImpulse({x:3.5*r.x,y:3.5*r.y,z:3.5*r.z},!0))},onPointerOut:()=>{R(!1),_.current=null},onPointerUp:e=>{let r=e.target;if(r?.releasePointerCapture?.(e.pointerId),I(!1),O&&s&&.03>O.distanceTo(e.point)){let e=performance.now();null!==U.current&&e-U.current<350?(s(),U.current=null):U.current=e}C(null)},onPointerDown:e=>{let r=e.target;r?.setPointerCapture?.(e.pointerId),C(new y.Pq0().copy(e.point)),I(new y.Pq0().copy(e.point).sub(w.copy(x.current.translation())))},children:[(0,n.jsx)("mesh",{geometry:q.card.geometry,children:(0,n.jsx)("meshPhysicalMaterial",{map:v.base.map,"map-anisotropy":16,clearcoat:+!t,clearcoatRoughness:.15,roughness:.9,metalness:.8})}),(0,n.jsx)("mesh",{geometry:q.clip.geometry,material:v.metal,"material-roughness":.3}),(0,n.jsx)("mesh",{geometry:q.clamp.geometry,material:v.metal})]})]})]}),(0,n.jsxs)("mesh",{ref:a,children:[(0,n.jsx)("meshLineGeometry",{}),(0,n.jsx)("meshLineMaterial",{color:"white",depthTest:!1,resolution:t?[1e3,2e3]:[1e3,1e3],useMap:!0,map:z,repeat:[-4,1],lineWidth:1})]})]})}(0,i.e)({MeshLineGeometry:d.mx,MeshLineMaterial:d.Xu})},909:e=>{e.exports={wrapper:"Lanyard_wrapper__5068d"}}}]);